<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Checks whether proposed tolerance values for tols are suitable in number and order for submission to optweight. Users should include one value per item in formula. The output can also be used as an input to tols in optweight."><title>Construct and Check Tolerance Input — check.tols • optweight</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Construct and Check Tolerance Input — check.tols"><meta property="og:description" content="Checks whether proposed tolerance values for tols are suitable in number and order for submission to optweight. Users should include one value per item in formula. The output can also be used as an input to tols in optweight."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">optweight</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.5.9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Construct and Check Tolerance Input</h1>
      
      <div class="d-none name"><code>check.tols.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Checks whether proposed tolerance values for <code>tols</code> are suitable in number and order for submission to <code><a href="optweight.html">optweight</a></code>. Users should include one value per item in <code>formula</code>. The output can also be used as an input to <code>tols</code> in <code>optweight</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">check.tols</span><span class="op">(</span><span class="va">formula</span>,</span>
<span>           data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>           <span class="va">tols</span>,</span>
<span>           stop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for optweight.tols</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, internal <span class="op">=</span> <span class="cn">FALSE</span>, digits <span class="op">=</span> <span class="fl">5</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>formula</dt>
<dd><p>A formula with the covariates to be balanced with <code>optweight</code> on the right hand side. See <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></code> for more details. Interactions and functions of covariates are allowed. Lists of formulas are not allowed; multiple formulas must be checked one at a time.</p></dd>

  <dt>data</dt>
<dd><p>An optional data set in the form of a data frame that contains the variables in <code>formula</code>.</p></dd>

  <dt>tols</dt>
<dd><p>A vector of balance tolerance values in standardized mean difference units for each covariate. These should be in the order corresponding to the order of the corresponding variable in <code>formula</code>, except for interactions, which will appear after all lower-order terms. If only one value is supplied, it will be applied to all covariates.</p></dd>

  <dt>stop</dt>
<dd><p><code>logical</code>; if <code>TRUE</code>, an error will be thrown if the number of values in <code>tols</code> is not equal to the correct number of covariates in <code>formula</code>, and no messages will be displayed if the <code>tols</code> input is satisfactory. If <code>FALSE</code>, a message will be displayed if the number of values in <code>tols</code> is not equal to the correct number of covariates in <code>formula</code>, and other messages will be displayed.</p></dd>

  <dt>x</dt>
<dd><p>An <code>optweight.tols</code> object; the output of a call to <code>check.tols</code>.</p></dd>

  <dt>internal</dt>
<dd><p><code>logical</code>; whether to print the tolerance values that are to be used internally by <code>optweight</code>. See Value section.</p></dd>

  <dt>digits</dt>
<dd><p>How many digits to print.</p></dd>

  <dt>...</dt>
<dd><p>Ignored.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An <code>optweight.tols</code> object, which is a named vector of tolerance values, one for each variable specified in <code>formula</code>. This should be used as user inputs to <code><a href="optweight.html">optweight</a></code>. The <code>"internal.tols"</code> attribute contains the tolerance values to be used internally by <code>optweight</code>. These will differ from the vector values when there are factor variables that are split up; the user only needs to submit one tolerance per factor variable, but seperate tolerance values are produced for each new dummy created.</p>


    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The purpose of <code>check.tols</code> is to allow users to ensure that their proposed input to <code>tols</code> in <code><a href="optweight.html">optweight</a></code> is correct both in the number of entries and their order. This is especially important when factor variables and interactions are included in the formula because factor variables are split into several dummies and interactions are moved to the end of the variable list, both of which can cause some confusion and potential error when entering <code>tols</code> values.</p>
<p>Factor variables are internally split into a dummy variable for each level, but the user only needs to specify one tolerance value per original variable; <code>check.tols</code> automatically expands the <code>tols</code> input to match the newly created variables.</p>
<p>Interactions (e.g., <code>a:b</code> or <code>a*b</code> in the <code>formula</code> input) are always sent to the end of the variable list even if they are specified elsewhere in the <code>formula</code>. It is important to run <code>check.tols</code> to ensure the order of the proposed <code>tols</code> corresponds to the represented order of covariates used in <code>optweight</code>. You can run <code>check.tols</code> with no <code>tols</code> input to see the order of covariates that is required.</p>
<p><code>check.tols</code> was designed to be used primarily for its message printing and <code>print</code> method, but you can also assign its output to an object for use as an input to <code>tols</code> in <code>optweight</code>.</p>
<p>Note that only one formula and vector of tolerance values can be assessed at a time; for multiple treatment periods, each formula and tolerance vector must be entered seperately.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Noah Greifer</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="check.targets.html">check.targets</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ngreifer.github.io/cobalt/" class="external-link">"cobalt"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"lalonde"</span>, package <span class="op">=</span> <span class="st">"cobalt"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Checking if the correct number of entries are included:</span></span></span>
<span class="r-in"><span><span class="fu">check.tols</span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                tols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.01</span>, <span class="fl">.02</span>, <span class="fl">.03</span>, <span class="fl">.04</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> tols must contain 5 numbers. 4 were included.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> All values in the output have been assigned NA.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - vars:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	age   educ   married   nodegree   re74</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Checking the order of interactions; notice they go</span></span></span>
<span class="r-in"><span><span class="co">#at the end even if specified at the beginning. The</span></span></span>
<span class="r-in"><span><span class="co">#.09 values are where the interactions might be expected</span></span></span>
<span class="r-in"><span><span class="co">#to be, but they are in fact not.</span></span></span>
<span class="r-in"><span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu">check.tols</span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span><span class="op">:</span><span class="va">educ</span> <span class="op">+</span> <span class="va">married</span><span class="op">*</span><span class="va">race</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                tols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.09</span>, <span class="fl">.01</span>, <span class="fl">.01</span>, <span class="fl">.09</span>, <span class="fl">.01</span>, <span class="fl">.01</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">c</span>, internal <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - tols:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      married         race     nodegree         re74     age:educ married:race </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         0.09         0.01         0.01         0.09         0.01         0.01 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - tols used internally by optweight:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             married          race_black         race_hispan          race_white </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                0.09                0.01                0.01                0.01 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            nodegree                re74            age:educ  married:race_black </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                0.01                0.09                0.01                0.01 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married:race_hispan  married:race_white </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                0.01                0.01 </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Noah Greifer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

