<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Summarize, Print, and Plot Information about Estimated Weights — summary.optweight • optweight</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Summarize, Print, and Plot Information about Estimated Weights — summary.optweight"><meta name="description" content="These functions summarize the weights resulting from a call to optweight(), optweightMV(), or optweight.svy(). summary() produces summary statistics on the distribution of weights, including their range and variability, and the effective sample size of the weighted sample (computing using the formula in McCaffrey, Rudgeway, &amp;amp; Morral, 2004). plot() creates a histogram of the weights."><meta property="og:description" content="These functions summarize the weights resulting from a call to optweight(), optweightMV(), or optweight.svy(). summary() produces summary statistics on the distribution of weights, including their range and variability, and the effective sample size of the weighted sample (computing using the formula in McCaffrey, Rudgeway, &amp;amp; Morral, 2004). plot() creates a histogram of the weights."><meta property="og:image" content="https://ngreifer.github.io/optweight/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">optweight</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/optweight.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ngreifer/optweight/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Summarize, Print, and Plot Information about Estimated Weights</h1>
      <small class="dont-index">Source: <a href="https://github.com/ngreifer/optweight/blob/master/R/summary.R" class="external-link"><code>R/summary.R</code></a></small>
      <div class="d-none name"><code>summary.optweight.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions summarize the weights resulting from a call to <code><a href="optweight.html">optweight()</a></code>, <code><a href="optweightMV.html">optweightMV()</a></code>, or <code><a href="optweight.svy.html">optweight.svy()</a></code>. <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> produces summary statistics on the distribution of weights, including their range and variability, and the effective sample size of the weighted sample (computing using the formula in McCaffrey, Rudgeway, &amp; Morral, 2004). <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> creates a histogram of the weights.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'optweight'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">object</span>, top <span class="op">=</span> <span class="fl">5L</span>, ignore.s.weights <span class="op">=</span> <span class="cn">FALSE</span>, weight.range <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'optweightMV'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">object</span>, top <span class="op">=</span> <span class="fl">5L</span>, ignore.s.weights <span class="op">=</span> <span class="cn">FALSE</span>, weight.range <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'optweight.svy'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">object</span>, top <span class="op">=</span> <span class="fl">5L</span>, ignore.s.weights <span class="op">=</span> <span class="cn">FALSE</span>, weight.range <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'summary.optweight'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>an <code>optweight</code>, <code>optweightMV</code>, or <code>optweight.svy</code> object; the output of a call to <code><a href="optweight.html">optweight()</a></code>, <code><a href="optweightMV.html">optweightMV()</a></code>, or <code><a href="optweight.svy.html">optweight.svy()</a></code>.</p></dd>


<dt id="arg-top">top<a class="anchor" aria-label="anchor" href="#arg-top"></a></dt>
<dd><p><code>integer</code>; how many of the largest and smallest weights to display. Default
is 5. Ignored when <code>weight.range = FALSE</code>.</p></dd>


<dt id="arg-ignore-s-weights">ignore.s.weights<a class="anchor" aria-label="anchor" href="#arg-ignore-s-weights"></a></dt>
<dd><p>logical<code>; whether to ignore sampling weights when computing the weight summary. Default is </code>FALSE`.</p></dd>


<dt id="arg-weight-range">weight.range<a class="anchor" aria-label="anchor" href="#arg-weight-range"></a></dt>
<dd><p><code>logical</code>; whether to display statistics about the range of weights and the highest and lowest weights for each group. Default is <code>TRUE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments. For <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>, additional arguments passed to <code><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">graphics::hist()</a></code> to determine the number of bins, though <code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">ggplot2::geom_histogram()</a></code> from <span class="pkg">ggplot2</span> is actually used to create the plot.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>a <code>summary.optweight</code>, <code>summary.optweightMV</code>, or <code>summary.optweight.svy</code> object; the output of a call to <code>summary.optweight()</code>, <code>summary.optweightMV()</code>, or ()<code>summary.optweight.svy</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>For point treatments (i.e., <code>optweight</code> objects), <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> returns a <code>summary.optweight</code> object with the following
elements:</p>
<dl><dt>weight.range</dt>
<dd><p>The range (minimum and maximum) weight for each treatment group.</p></dd>

<dt>weight.top</dt>
<dd><p>The units with the greatest weights in each treatment group; how many are included is determined by <code>top</code>.</p></dd>

<dt>l2</dt>
<dd><p>The square root of the L2 norm of the estimated weights from the base weights, weighted by the sampling weights (if any): \(\sqrt{\frac{1}{n}\sum_i {s_i(w_i - b_i)^2}}\)</p></dd>

<dt>l1</dt>
<dd><p>The L1 norm of the estimated weights from the base weights, weighted by the sampling weights (if any): \(\frac{1}{n}\sum_i {s_i \vert w_i - b_i \vert}\)</p></dd>

<dt>linf</dt>
<dd><p>The L\(\infty\) norm (maximum absolute deviation) of the estimated weights from the base weights: \(\max_i {\vert w_i - b_i \vert}\)</p></dd>

<dt>rel.ent</dt>
<dd><p>The relative entropy between the estimated weights and the base weights (entropy norm), weighted by the sampling weights (if any): \(\frac{1}{n}\sum_i {s_i w_i \log\left(\frac{w_i}{b_i}\right)}\). Only computed if all weights are positive.</p></dd>

<dt>num.zeros</dt>
<dd><p>The number of units with a weight equal to 0.</p></dd>

<dt>effective.sample.size</dt>
<dd><p>The effective sample size for each treatment group before and after weighting.</p></dd>


</dl><p>For multivariate treatments (i.e., <code>optweightMV</code> objects), a list of the above elements for each treatment.</p>
<p>For <code>optweight.svy</code> objects, the above object but with no treatment group divisions.</p>
<p><code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> returns a <code>ggplot</code> object with a histogram displaying the
distribution of the estimated weights. If the estimand is the ATT or ATC,
only the weights for the non-focal group(s) will be displayed (since the
weights for the focal group are all 1). A dotted line is displayed at the
mean of the weights (the mean of the base weights, or 1 if not supplied).</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>McCaffrey, D. F., Ridgeway, G., &amp; Morral, A. R. (2004).
Propensity Score Estimation With Boosted Regression for Evaluating Causal
Effects in Observational Studies. <em>Psychological Methods</em>, 9(4), 403–425. <a href="https://doi.org/10.1037/1082-989X.9.4.403" class="external-link">doi:10.1037/1082-989X.9.4.403</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="plot.optweight.html">plot.optweight()</a></code> for plotting the values of the dual variables.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ngreifer.github.io/cobalt/" class="external-link">"cobalt"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"lalonde"</span>, package <span class="op">=</span> <span class="st">"cobalt"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Balancing covariates between treatment groups (binary)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">ow1</span> <span class="op">&lt;-</span> <span class="fu"><a href="optweight.html">optweight</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                    <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                  tols <span class="op">=</span> <span class="fl">.001</span>,</span></span>
<span class="r-in"><span>                  estimand <span class="op">=</span> <span class="st">"ATT"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">optweight</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - norm minimized: "l2"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - base weights: present</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: 2-category</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - estimand: ATT (focal: 1)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, married, nodegree, re74</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ow1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Min                                 Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated   1           ||                  1.   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control   0 |---------------------------| 3.019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              1     2     3     4     5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  treated     1     1     1     1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            404   226   224   111    84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  control 2.511 2.527 2.626 2.721 3.019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            L2    L1    L∞ Rel Ent # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated 0.    0.    0.       0.         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control 0.783 0.694 2.019    0.39       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted  429.       185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted    265.88     185</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">s</span>, breaks <span class="op">=</span> <span class="fl">12</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="summary.optweight-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Noah Greifer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

